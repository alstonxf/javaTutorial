# Linux 文件和文件夹权限

## Linux 文件普通权限

首先来查看一下当前目录下的文件内容吧

```javascript
ls -l    查看当前目录下的文件列表
ls -l xxx.xxx （xxx.xxx是文件名） 查看指定的文件
```

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/tdhxz4bc3u.jpeg?imageView2/2/w/1620)

我们可以看到文件的权限，-rw-rw-r--  ，一共有10位数。

其中： 最前面那个 - 代表的是类型（详细如下面贴图所示）

中间那三个 rw- 代表的是所有者（user）

中间那三个 rw- 代表的是组群（group）

最后那三个 r-- 代表的是其他人（other）

然后我再解释一下后面那9位数：

**r** 表示文件可以被读（read）

**w** 表示文件可以被写（write）

**x** 表示文件可以被执行（e**x**ecute如果它是程序的话）

**-** 表示相应的权限还没有被授予

文件和文件夹操作权限：

| 权限 | 简写 | 对普通文件的作用     | 对文件夹的作用                       |
| :--- | :--- | :------------------- | :----------------------------------- |
| 读取 | r    | 查看文件内容         | 列出文件夹中的文件(ls)               |
| 写入 | w    | 修改文件内容         | 在文件夹中删除、添加或重命名文件(夹) |
| 执行 | x    | 文件可以作为程序执行 | cd 到文件夹                          |

### 图解：

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/8er4umm8if.jpeg?imageView2/2/w/1620)

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/ar12yt2by9.png?imageView2/2/w/1620)

### 注意：

一个目录同时具有**读权限和执行权限**才可以**打开并查看内部文件**，

而一个目录要有**写**权限才允许在其中**创建其它文件**，这是因为目录文件实际保存着该目录里面的文件的列表等信息。

## 特殊权限SUID、SGID、Sticky

**特殊权限SUID、SGID、Sticky** 在 linux 系统中还有三种与用户身份无关的三个文件权限属性。即**SUID、SGID和Sticky。**

**SUID(Set User ID, 4):** 该属性==只对有执行权限的文件有效，对目录无效。==执行具有SUID权限的程序时，引发的进程的所有者是程序文件的所有者，而不是启动程序的用户（除非二者是同一个人）。比如，如果一个程序的所有者是root且具有SUID属性，一个普通用户执行此程序时，如同root执行此程序一样。（==请注意该属性对Shell脚本程序无效==）该属性为一些特殊程序（如lpr）的启动带来了方便。但有时也带来了安全隐患：比如一个具有SUID属性的程序如果在执行时运行了一个shell，那么用户可以籍此得到系统的最高权限。==SUID可用**s**表示==，如: $ ls -l /usr/bin/passwd -rw**s**r-xr-x 1 root root 47032 Feb 16  2014 /usr/bin/passwd

**SGID(Set Group ID, 4):** ==对于可执行文件，SGID与SUID类似，引发的进程的所有组是程序文件所属的组。对于目录，SGID属性会使目录中新建文件的所属组与该目录相同。SGID也可以用**s**表示==，如: $ ls -l /var drwxrw**s**r-x  2 root staff    4096 Apr 10  2014 local drwxrwxr-x 15 root syslog   4096 Apr  4 19:57 log

**Sticky, 1:** ==仅对目录有效。带sticky属性的目录下的文件或目录可以被其拥有者删除或改名。==常利用sticky属性创建这样的目录：组用户可以在此目录中创建新文件、修改文件内容，但只有文件所有者才能对自己的文件进行删除或改名。如系统中的/tmp文件夹。在属性字符串中，==通常用**t**表示。== $ ls -l / drwxrwxrw**t**   8 root root  4096 Apr  4 23:57 tmp

## 

## **修改文件和文件夹对应用户的操作权限**

如果你有一个自己的文件不想被其他用户读、写、执行，那么就需要对文件的权限做修改，这里有两种方式：

### **方式一：二进制数字表示 chomd 权限 文件名**

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/41ytcq2nku.jpeg?imageView2/2/w/1620)

每个文件的三组权限： u 代表所有者（user） g 代表所有者所在的组群（group） o 代表其他人，但不是u和g （other） a 代表全部的人，也就是包括u，g和o 根据上图，其中：rwx也可以用数字来代替

 **r ------------4** 

**w -----------2** 

**x ------------1** 

- **------------0**

当大家都明白了上面的东西之后，那么我们常见的以下的一些权限就很容易都明白了： -rw------- (600) 只有所有者才有读（4）和写（2）的权限。 -rw-r--r-- (644) 只有所有者才有读和写的权限，组群和其他人只有读的权限。 -rwx------ (700) 只有所有者才有读，写，执行的权限。 -rwxr-xr-x (755) 只有所有者才有读，写，执行的权限，组群和其他人只有读和执行的权限。 -rwx--x--x (711) 只有所有者才有读，写，执行的权限，组群和其他人只有执行的权限。 -rw-rw-rw- (666) 每个人都有读写的权限。 -rwxrwxrwx (777) 每个人都有读写和执行的权限。

**实际操作**

```apl
chomd 3位权限(用户的权限总分，用户组的权限总分，其他的权限总分) 文件名
```

查看了test的权限，是所有者拥有读、写、执行的权限：

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/wav9a48jdp.png?imageView2/2/w/1620)

然后向文件里添加了些内容，更改了下权限（700：-rwx------），并尝试在shiyanlou(所有者)下读取文件，可以读取。

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/88lr27qq0h.jpeg?imageView2/2/w/1620)

更换到其他用户Peter,如下图再尝试读取，显示是权限不够，无法读取。

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/1gbobyoene.jpeg?imageView2/2/w/1620)

### **方式二：加减赋值操作** chmod 用户（ugoa) 添加或删除（+-） 读写或执行（wre）  文件名

==u 代表所有者（user） g 代表所有者所在的组群（group） o 代表其他人，但不是u和g （other）==

==a 代表全部的人，也就是包括u，g和o==

==\+ 和 - 分别表示增加和去掉相应的权限。+号一般不显示（用空格代替）==

在终端输入： 

```apl
chmod o+w xxx.xxx 或 chmod o w xxx.xxx         表示给其他人（o）授予写（w）xxx.xxx这个文件的权限

chmod go-rw xxx.xxx                         表示删除xxx.xxx中组群和其他人的读和写的权限 chmod ug-r xxx.xxx
```

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/0s2nap1rzk.jpeg?imageView2/2/w/1620)

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/9tqb139xye.jpeg?imageView2/2/w/1620)

## **修改文件或文件夹的拥有者/所属的组 **

使用命令chown改变目录或文件的所有权（所有者/组）

### 修改所有者  chown 拥有者 文件名

文件与目录不仅可以改变权限，其所有权及所属用户组也能修改，和设置权限类似，用户可以通过图形界面来设置，或执行chown命令来修改。 我们先执行ls -l看看目录情况：

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/89tghcnsh3.png?imageView2/2/w/1620)

可以看到test文件的所属用户组为root，所有者为root。 执行下面命令，把上图中test文件的所有权转移到**用户peter**: **# chown peter test**

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/llpumsr4u.png?imageView2/2/w/1620)

### 修改所属组  chown :所属组 文件名

要改变所属组，将test文件从root组中转移到组Peter中，可使用下面命令： **# chown :peter test**

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/udhigoo3hn.png?imageView2/2/w/1620)

### **将所属的用户和组一起更改** chown 拥有者:所属组 文件名

 将文件夹或文件**test**的拥有者修改成**shiyanlou**，所属的组修改成**shiyanlou**，如下图：

![img](https://ask.qcloudimg.com/http-save/yehe-2035292/chri3eczzy.jpeg?imageView2/2/w/1620)