# 12-企业权限管理-资源权限
## 资源权限操作

## 查询和添加

## PermissionController

```
@Controller
@RequestMapping("/permission")
public class PermissionController {<!-- -->

    @Autowired
    private IPermissionService permissionService;

    @RequestMapping("/save.do")
    public String save(Permission permission) throws Exception {<!-- -->
        permissionService.save(permission);
        return "redirect:findAll.do";
    }
    @RequestMapping("/findAll.do")
    public ModelAndView findAll() throws Exception {<!-- -->
        ModelAndView mv=new ModelAndView();
        List<Permission> permissionList = permissionService.findAll();
        mv.addObject("permissionList",permissionList);
        mv.setViewName("permission-list");
        return mv;
    }
}


```

## PermissionServiceImpl

```
@Service
public class PermissionServiceImpl implements IPermissionService{<!-- -->

    @Autowired
    private IPermissionDao permissionDao;

    @Override
    public void save(Permission permission) throws Exception{<!-- -->
        permissionDao.save(permission);
    }

    @Override
    public List<Permission> findAll() throws Exception{<!-- -->
        return permissionDao.findAll();
    }
}

```

## IPermissionDao

```
public interface IPermissionDao {<!-- -->

    @Select("select * from permission where id in (select permissionId from role_permission where roleId=#{id} )")
    public List<Permission> findPermissionByRoleId(String id) throws Exception;

    @Select("select * from permission")
    List<Permission> findAll() throws Exception;

    @Insert("insert into permission(permissionName,url) values(#{permissionName},#{url})")
    void save(Permission permission) throws Exception;
}


```

## permission-list.jsp

```

	

		<!-- 页面头部 -->
		<jsp:include page="header.jsp"></jsp:include>
		<!-- 页面头部 /-->

		<!-- 导航侧栏 -->
		<jsp:include page="aside.jsp"></jsp:include>
		<!-- 导航侧栏 /-->

		<!-- 内容区域 -->
		

			<!-- 内容头部 -->
			<section class="content-header">
			<h1>
				资源权限管理 <small>全部权限</small>
			</h1>
			<ol class="breadcrumb">
				<li><a href="${pageContext.request.contextPath}/index.jsp"><i
						class="fa fa-dashboard"></i> 首页</a></li>
				<li><a
					href="${pageContext.request.contextPath}/permission/findAll.do">资源权限管理</a></li>

				- 全部权限
			</ol>
			</section>
			<!-- 内容头部 /-->

				<!-- 正文区域 -->
				<section class="content"> <!-- .box-body -->
				
					
						<h3 class="box-title">列表</h3>
					

					

						<!-- 数据表格 -->
						

							<!--工具栏-->
							
								
									
										<button type="button" class="btn btn-default" title="新建" onclick="location.href='${pageContext.request.contextPath}/pages/permission-add.jsp'">
											<i class="fa fa-file-o"></i> 新建
										</button>
										
										<button type="button" class="btn btn-default" title="刷新">
											<i class="fa fa-refresh"></i> 刷新
										</button>
									
								
							
							
								
									<input type="text" class="form-control input-sm"
										placeholder="搜索"> <span
										class="glyphicon glyphicon-search form-control-feedback">
								
							
							<!--工具栏/-->

							<!--数据列表-->
							<table id="dataList"
								class="table table-bordered table-striped table-hover dataTable">
								<thead>
									<tr>
										<th class="" style="padding-right: 0px"><input
											id="selall" type="checkbox" class="icheckbox_square-blue">
										</th>
										<th class="sorting_asc">ID</th>
										<th class="sorting_desc">权限名称</th>
										<th class="sorting_asc sorting_asc_disabled">URL</th>
										<th class="text-center">操作</th>
									</tr>
								</thead>
								<tbody>

									<c:forEach items="${permissionList}" var="p">
										<tr>
											<td><input name="ids" type="checkbox"></td>
											<td>${<!-- -->p.id }</td>
											<td>${<!-- -->p.permissionName }</td>
											<td>${<!-- -->p.url }</td>
											<td class="text-center">
												[详情](${pageContext.request.contextPath}/permission/findById.do?id=${p.id})
												[删除权限](${pageContext.request.contextPath}/permission/deletePermission.do?id=${p.id})
												[添加权限](${pageContext.request.contextPath}/user/findUserByIdAndAllRole.do?id=${p.id})
											</td>
										</tr>
									</c:forEach>
								</tbody>
								<!--
                            <tfoot>
                            <tr>
                            <th>Rendering engine</th>
                            <th>Browser</th>
                            <th>Platform(s)</th>
                            <th>Engine version</th>
                            <th>CSS grade</th>
                            </tr>
                            </tfoot>-->
							</table>
							<!--数据列表/-->

						
						<!-- 数据表格 /-->

					
					<!-- /.box-body -->

					<!-- .box-footer-->
					
						
							
								总共2 页，共14 条数据。 每页 <select class="form-control">
									<option>1</option>
									<option>2</option>
									<option>3</option>
									<option>4</option>
									<option>5</option>
								</select> 条
							
						

						
							<ul class="pagination">
								- [首页](#)
								- [上一页](#)
								- [1](#)
								- [2](#)
								- [3](#)
								- [4](#)
								- [5](#)
								- [下一页](#)
								- [尾页](#)
							</ul>
						

					
					<!-- /.box-footer-->

				

				</section>
				<!-- 正文区域 /-->

			
			<!-- @@close -->
			<!-- 内容区域 /-->

			<!-- 底部导航 -->
			<footer class="main-footer">
			
				<b>Version</b> 1.0.8
			
			<strong>Copyright &amp;copy; 2014-2017 <a
				href="http://www.itcast.cn">研究院研发部</a>.
			</strong> All rights reserved. </footer>
			<!-- 底部导航 /-->

		

```

## permission-add.jsp

```
	

		<!-- 页面头部 -->
		<jsp:include page="header.jsp"></jsp:include>
		<!-- 页面头部 /-->
		<!-- 导航侧栏 -->
		<jsp:include page="aside.jsp"></jsp:include>
		<!-- 导航侧栏 /-->

		<!-- 内容区域 -->
		

			<!-- 内容头部 -->
			<section class="content-header">
			<h1>
				资源权限管理 <small>资源权限表单</small>
			</h1>
			<ol class="breadcrumb">
				<li><a href="${pageContext.request.contextPath}/index.jsp"><i
						class="fa fa-dashboard"></i> 首页</a></li>
				- [资源权限管理](${pageContext.request.contextPath}/permission/findAll.do)
				- 资源权限表单
			</ol>
			</section>
			<!-- 内容头部 /-->

			<form action="${pageContext.request.contextPath}/permission/save.do"
				method="post">
				<!-- 正文区域 -->
				<section class="content"> <!--产品信息-->

				
					资源权限信息
					

						权限名称
						
							<input type="text" class="form-control" name="permissionName"
								placeholder="权限名称" value="">
						
						RUL
						
							<input type="text" class="form-control" name="url"
								placeholder="URL" value="">
						
										

					
				
				<!--订单信息/--> <!--工具栏-->
				
					<button type="submit" class="btn bg-maroon">保存</button>
					<button type="button" class="btn bg-default"
						onclick="history.back(-1);">返回</button>
				
				<!--工具栏/--> </section>
				<!-- 正文区域 /-->
			</form>
		
		<!-- 内容区域 /-->

		<!-- 底部导航 -->
		<footer class="main-footer">
		
			<b>Version</b> 1.0.8
		
		<strong>Copyright &amp;copy; 2014-2017 <a
			href="http://www.itcast.cn">研究院研发部</a>.
		</strong> All rights reserved. </footer>
		<!-- 底部导航 /-->

	

```

## 资源权限的详情页和删除

## controller

```

    @RequestMapping("/deletePermission")
    public String deletePermission(String id) throws Exception {<!-- -->
        permissionService.deleteById(id);
        return "redirect:findAll.do";
    }

    @RequestMapping("/findById")
    public ModelAndView findById(String id) throws Exception {<!-- -->
        Permission permission=  permissionService.findById(id);
        ModelAndView mv=new ModelAndView();
        mv.setViewName("permission-show");
        mv.addObject("permission",permission);
        return mv;
    }

```

## PermissionSerevice

```
    @Override
    public void deleteById(String id) throws Exception {<!-- -->
        permissionDao.deleteFromRole_Permission(id);
        permissionDao.deleteById(id);
    }

    @Override
    public Permission findById(String id) throws Exception {<!-- -->
        return permissionDao.findById(id);
    }

```

## IPermissionDao

```
    @Delete("delete from role_permission where permissionId=#{id}")
    void deleteFromRole_Permission(String id);
    @Delete("delete from permission where id=#{id}")
    void deleteById(String id);
    @Select("select * from permission where id=#{id}")
    Permission findById(String id);

```

## permission-list.jsp

```
		<td class="text-center">
			[详情](${pageContext.request.contextPath}/permission/findById.do?id=${p.id})
			[删除权限](${pageContext.request.contextPath}/permission/deletePermission.do?id=${p.id})
			[添加权限](${pageContext.request.contextPath}/user/findUserByIdAndAllRole.do?id=${p.id})
		</td>

```
# **文章地址： **https://blog.csdn.net/qq_43061290/article/details/105616130